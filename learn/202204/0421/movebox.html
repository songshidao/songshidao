
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<style>
*{ margin:0; padding:0;}
#wrapper{ width:300px; height:300px; border:10px #000 solid; margin:20px; position:relative;display:flex;flex-wrap: wrap;}
#div1 img{ width:100px; height:100px;}
</style>
<script src="../../../jquery-3.6.0.js"></script>
</head>

<body>
<div id="wrapper">
    <img src="images/0.png" width="100" height="100" alt="">
    <img src="images/1.png" width="100" height="100" alt="">
    <img src="images/2.png" width="100" height="100" alt="">
    <img src="images/3.png" width="100" height="100" alt="">
    <img src="images/4.png" width="100" height="100" alt="">
    <img src="images/5.png" width="100" height="100" alt="">
    <img src="images/6.png" width="100" height="100" alt="">
    <img src="images/7.png" width="100" height="100" alt="">
</div>
<script>
    const map=[
        [1,3],
        [0,2,4],
        [1,5],
        [0,4,6],
        [1,3,5,7],
        [2,4,8],
        [3,7],
        [4,6,8],
        [5,7]
    ]
    let blankIndex = 8
	let temp
    const $img= $('#wrapper img')
    $img.each(function(i,image){
        $(image).css({
        position:'absolute',
        left:i%3 * 100,
        top:Math.floor(i/3)*100
    })
	$(image).attr('index',i)
	})
	
	move()
	function move(){
		let moveImg=map[blankIndex]
		let filterArr = map[temp]
		let activeImg = moveImg[Math.floor(Math.random()*moveImg.length)]
		let targetLeft=blankIndex%3*100
		let targetTop=Math.floor(blankIndex/3)*100
		$img.each(function(i,image){
			
			if($(image).attr('index')==activeImg){
			        $(image).animate({
			    left:targetLeft,
			    top:targetTop
			},'slow',function(){
				temp=blankIndex
				// console.log(blankIndex)
				blankIndex=$(this).attr('index')
				$(this).attr('index',temp)
				move()
			})
			    }
		})
		    
	}
    
    
    
</script>
</body>
</html>
